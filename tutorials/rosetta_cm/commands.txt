Command lines for Comparative Modeling Tutorial
Rosetta Workshop, November 2015
Original Creator: Gregory Sliwoski
Adapted by: Alyssa Lokits

1. Set up
a. Clean pdbs
~/rosetta_workshop/rosetta_cm/scripts/clean_pdb.py 2RH1_ISOLATED A
~/rosetta_workshop/rosetta_cm/scripts/clean_pdb.py 3EML_ISOLATED A
~/rosetta_workshop/rosetta_cm/scripts/clean_pdb.py 3ODU_ISOLATED A

files created: 2RH1_A.fasta, 2RH1_ISOLATED_A.pdb, 3EML_A.fasta, 3EML_ISOLATED_A.pdb, 3ODU_A.fasta, 3ODU_ISOLATED_A.pdb

e. Convert octopus to span file
~/rosetta_workshop/rosetta_cm/scripts/octopus2span.pl 1u19.octopus

2. Threading
a. Thread 1u19 over templates

~/rosetta_workshop/rosetta/main/source/bin/partial_thread.default.linuxgccrelease -database ~/rosetta_workshop/rosetta/main/database/ -in:file:fasta 1u19.fasta -in:file:alignment 1u19_2rh1.grishin -in:file:template_pdb 2rh1.pdb
~/rosetta_workshop/rosetta/main/source/bin/partial_thread.default.linuxgccrelease -database ~/rosetta_workshop/rosetta/main/database/ -in:file:fasta 1u19.fasta -in:file:alignment 1u19_3eml.grishin -in:file:template_pdb 3eml.pdb
~/rosetta_workshop/rosetta/main/source/bin/partial_thread.default.linuxgccrelease -database ~/rosetta_workshop/rosetta/main/database/ -in:file:fasta 1u19.fasta -in:file:alignment 1u19_3odu.grishin -in:file:template_pdb 3odu.pdb

b. rename threaded files
mv 2rh1.pdb.pdb 1u19_on_2rh1.pdb
mv 3eml.pdb.pdb 1u19_on_3eml.pdb
mv 3odu.pdb.pdb 1u19_on_3odu.pdb

3. Hybridize
~/rosetta_workshop/rosetta/main/source/bin/rosetta_scripts.default.linuxgccrelease @rosetta_cm.options -database ~/rosetta_workshop/rosetta/main/database -nstruct 3

4. Relax
~/rosetta_workshop/rosetta/main/source/bin/relax.linuxgccrelease -database ~/rosetta_workshop/rosetta/main/database @relax.options -s S_0001.pdb -out:prefix S_0001_relax_ -nstruct 1
~/rosetta_workshop/rosetta/main/source/bin/relax.linuxgccrelease -database ~/rosetta_workshop/rosetta/main/database @relax.options -s S_0002.pdb -out:prefix S_0002_relax_ -nstruct 1
~/rosetta_workshop/rosetta/main/source/bin/relax.linuxgccrelease -database ~/rosetta_workshop/rosetta/main/database @relax.options -s S_0003.pdb -out:prefix S_0003_relax_ -nstruct 1

5. Final model selection
a. combine all score files and sort by total pose score:
cat *.fasc | sort -nk2 > scores_sorted.txt

b. See top scoring model filename and score:
head -n1 scores_sorted.txt | awk '{print $24,$2}'
