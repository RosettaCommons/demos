<ROSETTASCRIPTS>
    <SCOREFXNS>
        <myscore weights=talaris2014/>
    </SCOREFXNS>

    <RESIDUE_SELECTORS>

		<Chain name=pdz chains=A />
		<Chain name=peptide chains=B />
		<Neighborhood name=interface selector=peptide distance=6/>
		<Not name=not_interface selector=interface/>

    </RESIDUE_SELECTORS>

    <TASKOPERATIONS>
        <InitializeFromCommandline name=init/>

		<OperateOnResidueSubset name=repackonly_pdz selector=pdz >
			<RestrictToRepackingRLT/>
		</OperateOnResidueSubset>

		<OperateOnResidueSubset name=fix_notinterface selector=not_interface >
			<PreventRepackingRLT />
		</OperateOnResidueSubset>
		
    </TASKOPERATIONS>
    
    <FILTERS>
    </FILTERS>

    <MOVERS>

		<Small name=small_mover scorefxn=myscore temperature=0.5 nmoves=1 angle_max=6.0 preserve_detailed_balance=0 residue_selector=interface />

		<PackRotamersMover name=repack_mover scorefxn=myscore task_operations=init,repackonly_pdz,fix_notinterface />

		<PDBTrajectoryRecorder name=pdb_traj_recorder stride=1 filename=traj.pdb cumulate_jobs=0 cumulate_replicas=0 />

        <ParsedProtocol name=small_repack mode=sequence >
            <Add mover_name=small_mover />
            <Add mover_name=repack_mover />
	    <Add mover_name=pdb_traj_recorder />
        </ParsedProtocol>
        
        <GenericMonteCarlo name=gmc_mover mover_name=small_repack scorefxn_name=myscore sample_type=low temperature=0.8 trials=10 drift=1 preapply=false recover_low=1 />

    </MOVERS>

    <PROTOCOLS>
		<Add mover=gmc_mover />
    </PROTOCOLS>
</ROSETTASCRIPTS>
